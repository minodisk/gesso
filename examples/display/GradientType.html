<!DOCTYPE html>
<html>
<head>
  <title>graphicsJS | GradientType</title>
  <style>
    canvas {
      background : url('../.images/check.png') repeat 0 0;
    }
  </style>
  <script src="../../.old/yui-min.js"></script>
  <script src="../../.old/swfobject.js"></script>
  <script type="text/javascript" src="../../lib/browser/bucketz.js"></script>
  <script type="text/javascript">
    (function (window, document) {
      var Graphics = require('display.Graphics')
        , Layer = require('display.Layer')
        , GradientType = require('display.styles.GradientType')

        , swf, rotation, display, layer;

      function embedSWF() {
        document.removeEventListener('DOMContentLoaded', embedSWF, false);

        rotation = 0;
        display = new Graphics(document.querySelector('_canvas'));
        layer = new Layer();
        display.addChild(layer);

        var flashvars = {
        };
        var params = {
          menu: 'false',
          scale: 'noScale',
          allowFullscreen: 'true',
          allowScriptAccess: 'always',
          bgcolor: '#FFFFFF'
        };
        var attributes = {
          id: 'gradientSWF'
        };
        swfobject.embedSWF('images/gradient.swf', 'gradientSWF', '512px',
          '256px', '10.0.0', 'images/expressInstall.swf',
          flashvars, params, attributes, start);
      }

      function start(result) {
        display.addListener('enterFrame', render);
      }

      function render() {
        rotation += Math.PI / 180;
        var box = Graphics.createGradientBox(0, 0, 512, 256, rotation);
        layer.drawRect(0, 0, 512, 256);
        layer.fillGradient(GradientType.LINEAR, [0xff0000, 0x0000ff],
          [1, 1], [0, 1], box);
        layer._context.lineWidth = 5;
        layer.drawCircle(box.x0, box.y0, 8);
        layer.stroke('#ffff00');
        layer.drawCircle(box.x1, box.y1, 8);
        layer.stroke('#00ffff');
        display.render();

        //swf.rotate(rotation);
      }

      document.addEventListener('DOMContentLoaded', embedSWF, false);
    })(window, document);
  </script>
</head>
<body>
<header>
  <a href="../">index</a>

  <h1>Gradient Test</h1>
</header>
<h2>Fill</h2>

<h3>canvas</h3>
<canvas width="512" height="256"></canvas>
<h3>swf</h3>

<div id="gradientSWF"></div>
</body>
</html>